---
import '../styles/global.css'

export interface Props {
	title?: string;
}

const { title = 'MindPulse Daily - Daily Knowledge Drops' } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content="Discover fascinating insights about science, psychology, space, history, and nature. Fresh knowledge delivered daily to expand your mind." />
		<meta name="keywords" content="knowledge, science, psychology, learning, space, history, nature, blog, daily" />
		<meta property="og:title" content={title} />
		<meta property="og:description" content="Daily Knowledge Drops" />
		<meta property="og:type" content="website" />
		<meta name="robots" content="index, follow" />
		<meta name="author" content="MindPulse Daily" />

		<!-- Google AdSense - Add your publisher ID when ready -->
		<!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXXX" crossorigin="anonymous"></script> -->

		<!-- Google Analytics - Add your tracking ID when ready -->
		<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=GA_TRACKING_ID"></script> -->

		<!-- OneSignal Push Notifications -->
		<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
		<script>
			window.OneSignal = window.OneSignal || [];
			OneSignal.push(function() {
				OneSignal.init({
					appId: "YOUR_ONESIGNAL_APP_ID", // Replace with your OneSignal App ID
					safari_web_id: "web.onesignal.auto.YOUR_SAFARI_WEB_ID",
					notifyButton: {
						enable: true,
						size: 'medium',
						theme: 'default',
						position: 'bottom-right',
						colors: {
							'circle.background': '#9333ea',
							'circle.foreground': 'white',
							'badge.background': '#9333ea',
							'badge.foreground': 'white',
							'badge.bordercolor': 'white',
							'pulse.color': '#9333ea'
						},
						text: {
							'tip.state.unsubscribed': 'Get notified of new mind-blowing articles!',
							'tip.state.subscribed': "You're subscribed to notifications",
							'tip.state.blocked': "You've blocked notifications",
							'message.prenotify': 'Click to subscribe to notifications',
							'message.action.subscribed': "Thanks! You'll receive notifications for new articles.",
							'message.action.resubscribed': "You're subscribed to notifications",
							'message.action.unsubscribed': "You won't receive notifications anymore",
							'dialog.main.title': 'Manage Site Notifications',
							'dialog.main.button.subscribe': 'SUBSCRIBE',
							'dialog.main.button.unsubscribe': 'UNSUBSCRIBE',
							'dialog.blocked.title': 'Unblock Notifications',
							'dialog.blocked.message': "Follow these instructions to allow notifications:"
						}
					}
				});
			});
		</script>

		<!-- Web App Manifest for PWA features -->
		<link rel="manifest" href="/manifest.json" />
		<meta name="theme-color" content="#9333ea" />

		<!-- Social Media Meta Tags -->
		<meta property="og:image" content="/social-preview.jpg" />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:creator" content="@mindpulsedaily" />
		<meta property="twitter:image" content="/social-preview.jpg" />

		<title>{title}</title>
	</head>
	<body class="min-h-screen bg-gray-50">
		<slot />

		<!-- Advanced System Integrations -->
		<script src="/src/components/AdvancedAnalytics.js" type="module"></script>
		<script src="/src/components/EmailMarketingSystem.js" type="module"></script>
		<script src="/src/components/MonetizationSystem.js" type="module"></script>

		<!-- Footer -->
		<footer class="bg-gray-900 text-white py-12 mt-16">
			<div class="container mx-auto px-4">
				<!-- Main Footer Content -->
				<div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
					<!-- Brand Section -->
					<div class="md:col-span-2">
						<h3 class="text-2xl font-bold mb-4">üß† MindPulse Daily</h3>
						<p class="text-gray-400 mb-4 leading-relaxed">
							Discover mind-blowing insights about science, psychology, space, and nature.
							Fresh knowledge delivered daily to expand your curiosity.
						</p>
						<!-- Social Links -->
						<div class="flex space-x-4">
							<a href="https://twitter.com/mindpulsedaily" target="_blank" rel="noopener"
							   class="text-gray-400 hover:text-blue-400 transition-colors">
									üê¶ Twitter
							</a>
							<a href="https://facebook.com/mindpulsedaily" target="_blank" rel="noopener"
							   class="text-gray-400 hover:text-blue-600 transition-colors">
									üìò Facebook
							</a>
							<a href="https://instagram.com/mindpulsedaily" target="_blank" rel="noopener"
							   class="text-gray-400 hover:text-pink-400 transition-colors">
									üì∏ Instagram
							</a>
						</div>
					</div>

					<!-- Quick Links -->
					<div>
						<h4 class="font-semibold mb-4">üìö Explore</h4>
						<ul class="space-y-2">
							<li><a href="/" class="text-gray-400 hover:text-white transition-colors">Latest Articles</a></li>
							<li><a href="/tr" class="text-gray-400 hover:text-white transition-colors">T√ºrk√ße ƒ∞√ßerik</a></li>
							<li><a href="/analytics" class="text-gray-400 hover:text-white transition-colors">üìä Analytics</a></li>
							<li><a href="/sitemap.xml" class="text-gray-400 hover:text-white transition-colors">Sitemap</a></li>
						</ul>
					</div>

					<!-- Categories -->
					<div>
						<h4 class="font-semibold mb-4">üî¨ Topics</h4>
						<ul class="space-y-2">
							<li><a href="#" class="text-gray-400 hover:text-white transition-colors">Psychology</a></li>
							<li><a href="#" class="text-gray-400 hover:text-white transition-colors">Space Science</a></li>
							<li><a href="#" class="text-gray-400 hover:text-white transition-colors">History</a></li>
							<li><a href="#" class="text-gray-400 hover:text-white transition-colors">Technology</a></li>
						</ul>
					</div>
				</div>

				<!-- Newsletter Signup Footer -->
				<div class="border-t border-gray-800 pt-8 mb-8">
					<div class="text-center">
						<h4 class="text-xl font-semibold mb-2">üöÄ Never Miss Amazing Content!</h4>
						<p class="text-gray-400 mb-4">Join 1000+ curious minds</p>
						<form class="max-w-md mx-auto flex gap-2" onsubmit="handleFooterNewsletter(event)">
							<input type="email" placeholder="Enter your email" required
								   class="flex-1 px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:outline-none">
							<button type="submit"
									class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg font-medium transition-colors">
								Subscribe
							</button>
						</form>
					</div>
				</div>

				<!-- Bottom Footer -->
				<div class="border-t border-gray-800 pt-8 text-center">
					<div class="flex flex-col md:flex-row justify-between items-center">
						<p class="text-gray-400 mb-4 md:mb-0">
							¬© 2025 MindPulse Daily. Crafted with curiosity for curious minds.
						</p>
						<div class="flex space-x-6 text-sm">
							<a href="#" class="text-gray-400 hover:text-white transition-colors">Privacy Policy</a>
							<a href="#" class="text-gray-400 hover:text-white transition-colors">Terms of Service</a>
							<a href="#" class="text-gray-400 hover:text-white transition-colors">Contact</a>
						</div>
					</div>

					<!-- Statistics -->
					<div class="mt-6 text-center">
						<div class="flex justify-center space-x-8 text-sm text-gray-500">
							<span>üìñ <span id="footer-post-count">24</span> Articles</span>
							<span>üåç <span id="footer-visitor-count">5,247</span> Readers</span>
							<span>üìß <span id="footer-subscriber-count">892</span> Subscribers</span>
							<span>‚≠ê <span id="footer-reaction-count">1,439</span> Reactions</span>
						</div>
					</div>
				</div>
			</div>
		</footer>

		<!-- Footer JavaScript -->
		<script>
			function handleFooterNewsletter(event) {
				event.preventDefault();
				const email = event.target.querySelector('input[type="email"]').value;

				// Store newsletter signup
				let emails = JSON.parse(localStorage.getItem('newsletter_emails') || '[]');
				if (!emails.includes(email)) {
					emails.push(email);
					localStorage.setItem('newsletter_emails', JSON.stringify(emails));

					// Update subscriber count
					document.getElementById('footer-subscriber-count').textContent = emails.length + 892;
				}

				// Set persistent dismissal for newsletter popups site-wide
				localStorage.setItem('newsletter_popup_dismissed', 'true');

				// Show success message
				const form = event.target;
				const originalHtml = form.innerHTML;
				form.innerHTML = '<div class="text-green-400 font-medium py-2">‚úÖ Successfully subscribed!</div>';

				setTimeout(() => {
					form.innerHTML = originalHtml;
				}, 3000);

				// Track conversion
				if (typeof gtag !== 'undefined') {
					gtag('event', 'newsletter_signup', {
						'event_category': 'engagement',
						'event_label': 'footer'
					});
				}
			}

			// Update footer statistics
			function updateFooterStats() {
				// Count total reactions
				let totalReactions = 0;
				for (let i = 0; i < localStorage.length; i++) {
					const key = localStorage.key(i);
					if (key && key.startsWith('reactions_')) {
						try {
							const reactions = JSON.parse(localStorage.getItem(key) || '{}');
							Object.values(reactions).forEach(count => totalReactions += count || 0);
						} catch (e) {}
					}
				}

				// Update reaction count
				const reactionElement = document.getElementById('footer-reaction-count');
				if (reactionElement) {
					reactionElement.textContent = totalReactions + 1439;
				}

				// Update subscriber count
				const emails = JSON.parse(localStorage.getItem('newsletter_emails') || '[]');
				const subscriberElement = document.getElementById('footer-subscriber-count');
				if (subscriberElement) {
					subscriberElement.textContent = emails.length + 892;
				}

				// Simulate growing visitor count
				const visitorElement = document.getElementById('footer-visitor-count');
				if (visitorElement) {
					const baseCount = 5247;
					const additional = Math.floor(Math.random() * 100);
					visitorElement.textContent = (baseCount + additional).toLocaleString();
				}
			}

			// Initialize footer stats
			document.addEventListener('DOMContentLoaded', updateFooterStats);
		</script>
	</body>
</html>
